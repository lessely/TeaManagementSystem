# TeaManagementSystem
### 一、设计正文
#### 1.	概述
##### 1.1	课题描述
本系统适用于对温湿度要求高的茶叶仓库环境，在传统的仓库中，由于没有分布式的传感节点，仓库管理员不便于对仓库内温湿度的了解，容易造成仓库内茶叶的变质，腐烂。变质的茶叶易产生黄曲霉素，黄曲霉毒素耐高温，无法经过高温煎炸烹调消除。会破坏人及动物肝脏组织。由于变质后的茶叶人体不能饮用，所以茶叶的存储是很重要的。


本系统在仓库内发布了多个Zigbee传感器节点，收集仓库内的各项数据，并由Esp32通过MQTT协议发送到服务端，服务端可以自动的根据温湿度的范围动态调节仓库内的各项设备，如抽湿器，报警器等。仓库管理员可根据安卓app随时查看仓库内的各项传感器信息，并可手动控制仓库内的的各项设备。
##### 1.2	系统目标
本系统由于采用了由Zigbee组成的分布式传感器节点，仓库管理员可方便快捷的通过手机app查看仓库内各项信息的温湿度及烟雾数据，并针对返回回来的不同的传感器数据进行控制，有利于仓库内商品的良好存储，也在一定程度下减轻了仓库管理员的工作负担，能使仓库节省人力成本。在智能化生产中，需要各种传感器来监控生产过程中的各个环节，使设备工作在正常状态或最佳状态，对茶叶的智能存储起了很大的推动作用。同时本系统还有茶叶的管理功能，便于员工的管理和茶叶数量的统计。
##### 1.3	环境
- 操作系统：
- 代码编写：Windows 10
- 服务器：Linux（Unraid 6.8.2）
- 使用软件：
- 代码编写：Android Studio
- 文档编写：Microsoft Word 2019
- 后端：NodeRed
- MQTT服务器：EMQ
- 开发语言：Java，JS


### 2.	系统需求分析
#### 2.1	系统应用场景
本系统适用于对温湿度要求高的仓库环境，例如茶叶存储，粮食存储。通过本系统仓库管理员可方便快捷的通过手机app查看仓库内各项信息的温湿度及烟雾数据，有利于仓库内商品的良好存储，也在一定程度下减轻了仓库管理员的工作负担，能使仓库节省人力成本，也便于茶叶数量的统计和员工的管理。
#### 2.2	功能需求分析
##### 根据茶叶仓库的具体情况，系统的主要功能包括：

- 1．	传感器信息查询 ：
- （1）	传感器信息查询：温湿度实时数据，烟雾实时数据
- （2）	传感器历史数据：温湿度历史数据，烟雾历史数据
- （3）	设备控制：开关灯，开关蜂鸣器，开关继电器
- 
- 2．	管理员功能：
- （1）	登录
- （2）	注册
- （3）	员工管理：添加员工、删除员工、修改员工、查询员工
- （4）	茶叶管理：查询茶叶、确认茶叶、删除茶叶
- 2．	员工功能：
- （1）	登录
- （2）	茶叶管理：添加茶叶、删除茶叶、修改茶叶、查询茶叶

##### 该系统主要由Zigbee CC2530开发板、温湿度传感器、烟雾传感器、ESP32模块、蜂鸣器和安卓客户端组成。
- 1．	Zigbee 终端节点：
- （1）	DHT11数据收集与处理
- （2）	MQ2数据采集与处理
- （3）	将数据发送到协调器
- 2．	Zigbee 协调器：
- （1）	终端节点数据收集与整理
- （2）	数据发送到ESP32
- 3．	ESP32：
- （1）	连接WIFI
- （2）	订阅MQTT服务器
- （3）	MQ135传感器数据的数据与整理
- （4）	将收到的数据发送到MQTT服务器
- （5）	收到的MQTT信息进行响应
- 4.	安卓客户端 ：
- （1）	传感器信息查询
- （2）	设备的控制

### 3.	系统总体设计
 
#### 3.1	设计数据库系统
- 管理员表：admin(id integer primary key , name text,password text)
- 员工表：user(id integer primary key,name, text,password text)
- 茶叶表：tea(teanum text primary key,teaname text,teastock integer,teaprice text,teastate integer default(0))
#### 3.2	设计交互界面
- （1）	系统主界面：
- 
- （2）	传感器信息界面
-  
- （3）	管理员登录注册界面
-  
- （4）	管理员功能界面
-  
- （5）	管理员修改员工信息
-    
- （6）	员工登录界面
-  
- （7）	员工菜单界面
- 
- （8）	员工修改茶叶信息
 
